{"ast":null,"code":"import _slicedToArray from\"/home/ali/reactjs-startup-accompaniment/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext}from\"react\";import Grid from\"@material-ui/core/Grid\";import Box from\"@material-ui/core/Box\";import FormTitle from\"../../components/common/Form/FormTitle\";import{Formik,Form}from\"formik\";import*as Yup from\"yup\";import{useTheme}from\"@material-ui/core/styles\";import useMediaQuery from\"@material-ui/core/useMediaQuery\";import UserNameInput from\"../../components/common/Form/UserNameInput\";import PasswordInput from\"../../components/common/Form/PasswordInput\";import{initialValues}from\"../../core/initialvalues/login.initialvalues\";import{validation}from\"../../core/validations/login.validation\";import CustomButton,{ClassName}from\"../../components/common/Form/Button\";import Loading from\"../../components/common/IsLoading\";import{usePostLogin}from\"../../core/api/post-login\";import{TokenContext}from\"../../components/AuthContext\";import{useStyles}from\"./Login.styles\";var Login=function Login(){var classes=useStyles({});var theme=useTheme();var matchesXs=useMediaQuery(theme.breakpoints.down(\"xs\"));var _usePostLogin=usePostLogin(),_usePostLogin2=_slicedToArray(_usePostLogin,2),mutate=_usePostLogin2[0],_usePostLogin2$=_usePostLogin2[1],data=_usePostLogin2$.data,error=_usePostLogin2$.error,isError=_usePostLogin2$.isError,isLoading=_usePostLogin2$.isLoading;var _useContext=useContext(TokenContext),dispatch=_useContext.dispatch;if(isError){console.log(error);}return/*#__PURE__*/React.createElement(React.Fragment,null,isLoading&&/*#__PURE__*/React.createElement(Loading,null),/*#__PURE__*/React.createElement(Box,{clone:true,boxShadow:3},/*#__PURE__*/React.createElement(Grid,{className:classes.loginContainer},/*#__PURE__*/React.createElement(Grid,{item:true,container:true,direction:\"row\",className:classes.loginFormContainer,style:{width:matchesXs?\"95%\":\"600px\"}},/*#__PURE__*/React.createElement(Grid,{item:true,container:true,direction:\"column\"},/*#__PURE__*/React.createElement(FormTitle,{title:\"\\u0648\\u0631\\u0648\\u062F  |  LOGIN\"})),/*#__PURE__*/React.createElement(Formik,{initialValues:initialValues,validationSchema:Yup.object().shape(validation),onSubmit:function onSubmit(values,_ref){var setSubmitting=_ref.setSubmitting;mutate(values).then(function(){dispatch({type:\"login\",payload:{accessToken:data.accessToken,refereshToken:data.refereshToken}});}).catch(function(){console.log(error);});setTimeout(function(){setSubmitting(false);},400);}},function(_ref2){var errors=_ref2.errors,touched=_ref2.touched,isSubmitting=_ref2.isSubmitting;return/*#__PURE__*/React.createElement(Form,{style:{width:\"100%\"}},/*#__PURE__*/React.createElement(UserNameInput,{errors:errors.username,touched:touched.username,notStar:true}),/*#__PURE__*/React.createElement(PasswordInput,{errors:errors.password,touched:touched.password,notStar:true}),/*#__PURE__*/React.createElement(Grid,{item:true,container:true,direction:\"row\",justify:\"center\",spacing:1,style:{textAlign:\"center\",marginTop:\"5em\",marginBottom:\"3em\"}},/*#__PURE__*/React.createElement(Grid,{item:true,sm:4},/*#__PURE__*/React.createElement(CustomButton,{for:ClassName.loginForm,disabled:isSubmitting,type:\"submit\",value:\"ورود  |  Login\"})),/*#__PURE__*/React.createElement(Grid,{item:true,sm:8},/*#__PURE__*/React.createElement(CustomButton,{for:ClassName.loginForgottenPassworn,type:\"button\",value:\"فراموشی گذرواژه  |  Forgotten Password\"}))));})))));};export{Login};","map":{"version":3,"sources":["/home/ali/reactjs-startup-accompaniment/src/screens/Login/Login.tsx"],"names":["React","useContext","Grid","Box","FormTitle","Formik","Form","Yup","useTheme","useMediaQuery","UserNameInput","PasswordInput","initialValues","validation","CustomButton","ClassName","Loading","usePostLogin","TokenContext","useStyles","Login","classes","theme","matchesXs","breakpoints","down","mutate","data","error","isError","isLoading","dispatch","console","log","loginContainer","loginFormContainer","width","object","shape","values","setSubmitting","then","type","payload","accessToken","refereshToken","catch","setTimeout","errors","touched","isSubmitting","username","password","textAlign","marginTop","marginBottom","loginForm","loginForgottenPassworn"],"mappings":"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","sourcesContent":["import React, { useContext } from \"react\"\nimport Grid from \"@material-ui/core/Grid\"\nimport Box from \"@material-ui/core/Box\"\nimport FormTitle from \"../../components/common/Form/FormTitle\"\nimport { Formik, Form } from \"formik\"\nimport * as Yup from \"yup\"\nimport { useTheme } from \"@material-ui/core/styles\"\nimport useMediaQuery from \"@material-ui/core/useMediaQuery\"\n\nimport UserNameInput from \"../../components/common/Form/UserNameInput\"\nimport PasswordInput from \"../../components/common/Form/PasswordInput\"\n\nimport { initialValues } from \"../../core/initialvalues/login.initialvalues\"\nimport { validation } from \"../../core/validations/login.validation\"\n\nimport CustomButton, { ClassName } from \"../../components/common/Form/Button\"\n\nimport Loading from \"../../components/common/IsLoading\"\n\nimport { usePostLogin } from \"../../core/api/post-login\"\nimport { TokenContext } from \"../../components/AuthContext\"\n\nimport { StyleProps } from \"./Login.styles\"\nimport { useStyles } from \"./Login.styles\"\n\ntype PropsClasses = Record<keyof StyleProps, string>\n\nconst Login: React.FC = () => {\n  const classes: PropsClasses = useStyles({} as StyleProps)\n  const theme = useTheme()\n  const matchesXs = useMediaQuery(theme.breakpoints.down(\"xs\"))\n\n  const [mutate, { data, error, isError, isLoading }] = usePostLogin()\n  const { dispatch } = useContext(TokenContext)\n\n  if (isError) {\n    console.log(error)\n  }\n\n  return (\n    <React.Fragment>\n      {isLoading && <Loading />}\n      <Box clone boxShadow={3}>\n        <Grid className={classes.loginContainer}>\n          <Grid\n            item\n            container\n            direction=\"row\"\n            className={classes.loginFormContainer}\n            style={{ width: matchesXs ? \"95%\" : \"600px\" }}\n          >\n            <Grid item container direction=\"column\">\n              <FormTitle title=\"ورود  |  LOGIN\" />\n            </Grid>\n\n            <Formik\n              initialValues={initialValues}\n              validationSchema={Yup.object().shape(validation)}\n              onSubmit={(values, { setSubmitting }) => {\n                mutate(values)\n                  .then(() => {\n                    dispatch({\n                      type: \"login\",\n                      payload: {\n                        accessToken: data.accessToken,\n                        refereshToken: data.refereshToken,\n                      },\n                    })\n                  })\n                  .catch(() => {\n                    console.log(error)\n                  })\n                setTimeout(() => {\n                  setSubmitting(false)\n                }, 400)\n              }}\n            >\n              {({ errors, touched, isSubmitting }) => {\n                return (\n                  <Form style={{ width: \"100%\" }}>\n                    <UserNameInput\n                      errors={errors.username}\n                      touched={touched.username}\n                      notStar={true}\n                    />\n                    <PasswordInput\n                      errors={errors.password}\n                      touched={touched.password}\n                      notStar={true}\n                    />\n                    <Grid\n                      item\n                      container\n                      direction=\"row\"\n                      justify=\"center\"\n                      spacing={1}\n                      style={{\n                        textAlign: \"center\",\n                        marginTop: \"5em\",\n                        marginBottom: \"3em\",\n                      }}\n                    >\n                      <Grid item sm={4}>\n                        <CustomButton\n                          for={ClassName.loginForm}\n                          disabled={isSubmitting}\n                          type={\"submit\"}\n                          value={\"ورود  |  Login\"}\n                        />\n                      </Grid>\n                      <Grid item sm={8}>\n                        <CustomButton\n                          for={ClassName.loginForgottenPassworn}\n                          type={\"button\"}\n                          value={\"فراموشی گذرواژه  |  Forgotten Password\"}\n                        />\n                      </Grid>\n                    </Grid>\n                  </Form>\n                )\n              }}\n            </Formik>\n          </Grid>\n        </Grid>\n      </Box>\n    </React.Fragment>\n  )\n}\n\nexport { Login }\n"]},"metadata":{},"sourceType":"module"}