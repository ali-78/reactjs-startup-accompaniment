{"ast":null,"code":"var _jsxFileName = \"/home/ali/reactjs-startup-accompaniment/src/components/AuthContext/AuthContext.tsx\";\nimport React, { createContext, useReducer, useEffect } from \"react\";\nimport { tokenReducer } from \"../../reducers/token\";\nexport const TokenContext = createContext({\n  token: {\n    accessToken: null,\n    refereshToken: null\n  },\n  dispatch: null\n});\n\nconst TokenContextProvider = props => {\n  const [token, dispatch] = useReducer(tokenReducer, {\n    accessToken: null,\n    refereshToken: null\n  }, () => {\n    const localData = localStorage.getItem(\"token\");\n    return localData ? JSON.parse(localData) : {\n      accessToken: null,\n      refereshToken: null\n    };\n  });\n  useEffect(() => {\n    localStorage.setItem(\"token\", JSON.stringify(token));\n  }, [token]);\n  const value = {\n    token,\n    dispatch\n  };\n  return /*#__PURE__*/React.createElement(TokenContext.Provider, {\n    value: value,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 5\n    }\n  }, props.children);\n};\n\nexport { TokenContextProvider };","map":{"version":3,"sources":["/home/ali/reactjs-startup-accompaniment/src/components/AuthContext/AuthContext.tsx"],"names":["React","createContext","useReducer","useEffect","tokenReducer","TokenContext","token","accessToken","refereshToken","dispatch","TokenContextProvider","props","localData","localStorage","getItem","JSON","parse","setItem","stringify","value","children"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,aAAhB,EAA+BC,UAA/B,EAA2CC,SAA3C,QAA4D,OAA5D;AAEA,SAASC,YAAT,QAA6B,sBAA7B;AAOA,OAAO,MAAMC,YAAY,GAAGJ,aAAa,CAAC;AACxCK,EAAAA,KAAK,EAAE;AAAEC,IAAAA,WAAW,EAAE,IAAf;AAAqBC,IAAAA,aAAa,EAAE;AAApC,GADiC;AAExCC,EAAAA,QAAQ,EAAE;AAF8B,CAAD,CAAlC;;AAKP,MAAMC,oBAAoB,GAAIC,KAAD,IAAW;AACtC,QAAM,CAACL,KAAD,EAAQG,QAAR,IAAoBP,UAAU,CAClCE,YADkC,EAElC;AAAEG,IAAAA,WAAW,EAAE,IAAf;AAAqBC,IAAAA,aAAa,EAAE;AAApC,GAFkC,EAGlC,MAAM;AACJ,UAAMI,SAAS,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAlB;AACA,WAAOF,SAAS,GACZG,IAAI,CAACC,KAAL,CAAWJ,SAAX,CADY,GAEZ;AAAEL,MAAAA,WAAW,EAAE,IAAf;AAAqBC,MAAAA,aAAa,EAAE;AAApC,KAFJ;AAGD,GARiC,CAApC;AAWAL,EAAAA,SAAS,CAAC,MAAM;AACdU,IAAAA,YAAY,CAACI,OAAb,CAAqB,OAArB,EAA8BF,IAAI,CAACG,SAAL,CAAeZ,KAAf,CAA9B;AACD,GAFQ,EAEN,CAACA,KAAD,CAFM,CAAT;AAIA,QAAMa,KAAK,GAAG;AAAEb,IAAAA,KAAF;AAASG,IAAAA;AAAT,GAAd;AACA,sBACE,oBAAC,YAAD,CAAc,QAAd;AAAuB,IAAA,KAAK,EAAEU,KAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGR,KAAK,CAACS,QADT,CADF;AAKD,CAtBD;;AAwBA,SAASV,oBAAT","sourcesContent":["import React, { createContext, useReducer, useEffect } from \"react\"\n\nimport { tokenReducer } from \"../../reducers/token\"\n\ntype DefaultValue = {\n  token: any\n  dispatch: any\n}\n\nexport const TokenContext = createContext({\n  token: { accessToken: null, refereshToken: null },\n  dispatch: null,\n} as DefaultValue)\n\nconst TokenContextProvider = (props) => {\n  const [token, dispatch] = useReducer(\n    tokenReducer,\n    { accessToken: null, refereshToken: null },\n    () => {\n      const localData = localStorage.getItem(\"token\")\n      return localData\n        ? JSON.parse(localData)\n        : { accessToken: null, refereshToken: null }\n    }\n  )\n\n  useEffect(() => {\n    localStorage.setItem(\"token\", JSON.stringify(token))\n  }, [token])\n\n  const value = { token, dispatch }\n  return (\n    <TokenContext.Provider value={value}>\n      {props.children}\n    </TokenContext.Provider>\n  )\n}\n\nexport { TokenContextProvider }\n"]},"metadata":{},"sourceType":"module"}